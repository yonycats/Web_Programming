<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <button>CSV데이터 가져오기</button>  
  <div></div>

<script>

  let v_btns = document.querySelector('button');

  //페이지 로딩 시 객체 생성 및 요청 완료 >> 완료상태 코드를 받음(4,200)
  //1.객체 생성 
  let req = new XMLHttpRequest();
  //2.요청 설정 - url >> csv파일 경로
  req.open('get','sample/test.csv');

    //버튼 누르면 응답 받음 >> 이미 요청에 의한 완료가 진행되었으므로 결과 표현 가능
    
    //★이미 완료된 시점이므로 직전 코드(2-요청 전달,3-요청 처리중)의 상태 확인은 불가
    //  >> 완료 직전 코드가 필요한 상황에서는 반드시 onreadystatechange의 도움을 받아야 가능 
 
    v_btns[1].addEventListener('click',function(){

      console.log(req.readyState);
      console.log(req.status);
      
      // req.onreadystatechange = function(){
        if(req.readyState == 4 && req.status == 200){
          console.log(req.responseText);     
        }
      // }
    });

  //3.요청 전달
  req.send();
  
</script>
</body>
</html>